<view><cu-custom class="status_bar" vue-id="1" bgColor="bg-gradual-orange" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content">{{pname}}</view></cu-custom><view data-event-opts="{{[['touchstart',[['hideDrawer',['$event']]]]]}}" class="content" bindtouchstart="__e"><scroll-view class="msg-list" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}" upper-threshold="50" data-event-opts="{{[['scrolltoupper',[['loadHistory',['$event']]]]]}}" bindscrolltoupper="__e"><view class="chatmar"></view><block wx:for="{{msgList}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row" id="{{'msg'+row.msg.id}}"><block wx:if="{{row.type=='user'}}"><block><block wx:if="{{row.msg.userinfo.uid==myuid}}"><view class="my"><view class="left"><block wx:if="{{row.msg.type=='text'}}"><view class="bubble"><rich-text class="msgfont" nodes="{{row.msg.content.text}}"></rich-text></view></block><block wx:if="{{row.msg.type=='img'}}"><view data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index,'msg']]]]]]]}}" class="bubble img" bindtap="__e"><image style="{{'width:'+(row.msg.content.w+'px')+';'+('height:'+(row.msg.content.h+'px')+';')}}" src="{{row.msg.content.url}}"></image></view></block></view><view class="right"><image src="{{myavatar}}"></image></view></view></block><block wx:if="{{row.msg.userinfo.uid!=myuid}}"><view class="other"><view class="left"><image src="{{pavatar}}"></image></view><view class="right"><block wx:if="{{row.msg.type=='text'}}"><view class="bubble"><rich-text class="msgfont" nodes="{{row.msg.content.text}}"></rich-text></view></block><block wx:if="{{row.msg.type=='img'}}"><view data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index,'msg']]]]]]]}}" class="bubble img" bindtap="__e"><image style="{{'width:'+(row.msg.content.w+'px')+';'+('height:'+(row.msg.content.h+'px')+';')}}" src="{{row.msg.content.url}}"></image></view></block></view></view></block></block></block></view></block></scroll-view></view><view class="{{['popup-layer',popupLayerClass]}}"><view class="{{['list',(hideEmoji)?'hidden':'']}}"><view class="docenter"><scroll-view class="scroll" scroll-y="true"><block wx:for="{{xuguanlist}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{isselecthabit[item.iconname]}}"><view class="flexicon"><image class="imglist" src="{{'../../../static/iconfont/'+item.url}}" mode data-event-opts="{{[['tap',[['daka',['$0'],[[['xuguanlist','',index]]]]]],['longpress',[['delXG',['$0'],[[['xuguanlist','',index]]]]]]]}}" bindtap="__e" bindlongpress="__e"></image><text class="iconname">{{item.iconname}}</text></view></block></block></scroll-view></view></view><view class="{{['more-layer',(hideMore)?'hidden':'']}}"><view class="list"><view class="docenter"><scroll-view class="scroll" scroll-y="true"><block wx:for="{{xuguanlist}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{!isselecthabit[item.iconname]}}"><view class="flexicon"><image class="imglist" src="{{'../../../static/iconfont/'+item.url}}" mode data-event-opts="{{[['tap',[['addxiguan',['$0'],[[['xuguanlist','',index]]]]]]]}}" bindtap="__e"></image><text class="iconname">{{item.iconname}}</text></view></block></block></scroll-view></view></view></view></view><view class="{{['input-box',popupLayerClass]}}"><view class="textbox"><view class="{{['text-mode',isVoice?'hidden':'']}}"><view data-event-opts="{{[['tap',[['chooseXG',['$event']]]]]}}" class="xg-selected" bindtap="__e"><view class="icon" style="padding-top:5px;"><image class="xgchoose-icon" src="{{selectedXG}}"></image></view></view><view data-event-opts="{{[['tap',[['chooseXG']]]]}}" class="box" bindtap="__e"><textarea disabled="true" auto-height="true" data-event-opts="{{[['focus',[['textareaFocus',['$event']]]],['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindfocus="__e" bindinput="__e"></textarea></view><view data-event-opts="{{[['tap',[['clearInput',['$event']]]]]}}" hidden="{{!(textMsg==''?false:true)}}" class="uni-icon uni-icon-clear clearinput" bindtap="__e"></view></view></view><view data-event-opts="{{[['tap',[['showMore',['$event']]]]]}}" class="more" bindtap="__e"><view class="icon add"></view></view><view data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" class="{{['send',isVoice?'hidden':'']}}" bindtap="__e"><view class="btn">发送</view></view></view></view>